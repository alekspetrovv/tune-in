version: '3'
services:
  prometheus:
    image: prom/prometheus:latest
    network_mode: host
    container_name: prometheus
    restart: unless-stopped
    volumes:
      - ./data/prometheus/config:/etc/prometheus/
    command:
      - "--config.file=/etc/prometheus/prometheus.yml"
    ports:
      - 9090:9090

  grafana:
    image: grafana/grafana-oss:8.5.2
    network_mode: host
    container_name: grafana
    restart: unless-stopped
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
      - GF_SERVER_DOMAIN=localhost


#  mysqldb:
#    image: "mysql:latest"
#    environment:
#      - MYSQL_ROOT_PASSWORD=root
#      - MYSQL_DATABASE=tune-in
#    ports:
#      - "3307:3306"
#
#  discovery-service:
#    build: services/discovery-service
#    ports:
#      - "8090:8090"
#
#  gateway-service:
#    build: services/gateway-service
#    restart: always
#    ports:
#      - "8070:8070"
#    environment:
#      eureka_client_service-url_defaultZone: http://discovery-service:8090/eureka/
#    depends_on:
#      - discovery-service
#
#  user-service:
#    build: services/user-service
#    restart: always
#    ports:
#      - "8086:8086"
#    environment:
#      eureka_client_service-url_defaultZone: http://discovery-service:8090/eureka/
#      spring_datasource_url: jdbc:mysql://mysqldb:3306/tune-in
#      spring_datasource_password: "root"
#    depends_on:
#      - mysqldb
#      - discovery-service
#
#  blog-service:
#    build: services/blog-service
#    restart: always
#    ports:
#      - "8085:8085"
#    environment:
#      eureka_client_service-url_defaultZone: http://discovery-service:8090/eureka/
#      spring_datasource_url: jdbc:mysql://mysqldb:3306/tune-in
#      spring_datasource_password: "root"
#    depends_on:
#      - mysqldb
#      - discovery-service



#  grafana:
#    image: grafana/grafana
#    container_name: grafana
#    network_mode: "host"
#    env_file:
#      - ./grafana.env






